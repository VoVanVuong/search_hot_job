<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8">
  <title>JobEntry - Job Portal Website Template</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="" name="keywords">
  <meta content="" name="description">

  <!-- Favicon -->
  <link href="img/favicon.ico" rel="icon">

  <!-- Google Web Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Inter:wght@700;800&display=swap" rel="stylesheet">

  <!-- Icon Font Stylesheet -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Libraries Stylesheet -->
  <link th:href="@{/lib/animate/animate.min.css}" rel="stylesheet">
  <link th:href="@{/lib/owlcarousel/assets/owl.carousel.min.css}" rel="stylesheet">

  <!-- Customized Bootstrap Stylesheet -->
  <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">

  <!-- Template Stylesheet -->
  <link th:href="@{/css/style.css}" rel="stylesheet">
  <style>
    /* Ẩn chấm đầu dòng của thẻ li */
    ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }
  </style>
</head>

<body>
<div class="container-fluid bg-white p-0">
  <!-- Spinner Start -->
  <div id="spinner"
       class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
    <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
  <!-- Spinner End -->


  <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-white navbar-light shadow sticky-top p-0">
        <a href="index.html" class="navbar-brand d-flex align-items-center text-center py-0 px-4 px-lg-5">
            <!--            <h1 class="m-0 text-primary">5Job</h1>-->

            <!--            <img th:src="../../static/img/5jlogo1.png" height="376" width="743"/></a>-->
            <img th:src="@{/img/5jlogo1.png}" height="60%" />
        </a>
        <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse"
                data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto p-4 p-lg-0 position-relative mb-0">
                <a th:href="@{/user/home}"  class="nav-item nav-link active"><i class="bi bi-house-door"></i> Home</a>
                <!--                <a th:href="@{/user/appliedJob}" class="nav-item nav-link">Job application</a>-->
                <a th:href="@{/user/listCompany}" class="nav-item nav-link"><i class="bi bi-building"></i> Company</a>
                <a th:href="@{/user/listJob}" class="nav-item nav-link"><i class="bi bi-book"></i> List job</a>
                <a th:if="${acc != null and not #strings.isEmpty(acc.name)}" th:href="@{http://localhost:9000/}"
                   class="nav-item nav-link"><i class="bi bi-chat"></i>Bot chat</a>
                <div th:if="${acc != null and not #strings.isEmpty(acc.name)}" class="nav-item dropdown mb-0 ml-1">
                        <span style="display:flex;align-items:center;position:relative;box-sizing:border-box;">
                            <a href="#" class="nav-link" data-bs-toggle="dropdown"
                               style="background-color:#E0F2FA;padding-right:6px;padding-left:6px;border-radius:50px;color:rgb(14, 18, 37);display:flex;align-items:center;font-weight:100;margin-left:4px;border:0.8px solid rgb(215, 215, 219);white-space:nowrap;cursor:pointer;text-decoration:none solid rgb(14, 18, 37);background-color:rgba(0, 0, 0, 0);box-sizing:border-box;">
<!--                             <img th:if="${acc.avatar ne null}" th:src="${acc.avatar}" alt="User Avatar">-->
                                <!--<img th:if="${acc.avatar == null}" th:src="@{/img/nomal.jpg}" alt="Default Avatar">-->
          <img alt="avatar" height="30" width="30" th:if="${acc.avatar ne null}" th:src="${acc.avatar}"
               style="object-fit:cover;object-position:50% 50%;margin-right:4px;border-radius:50%;vertical-align:middle;border-style:none;box-sizing:border-box;" />
                                <img alt="avatar" height="30" width="30" th:if="${acc.avatar == null}" th:src="@{/img/nomal.jpg}"
                                     style="object-fit:cover;object-position:50% 50%;margin-right:4px;border-radius:50%;vertical-align:middle;border-style:none;box-sizing:border-box;" />
                                <span
                                        style="max-width:150px;text-overflow:ellipsis;overflow:hidden;box-sizing:border-box;">
                                </span>
                                <span id="accName" th:if="${acc != null and not #strings.isEmpty(acc.name)}"
                                      th:text="${acc.name}">
                                </span>
                            </a>
                        </span>
                    <div class="dropdown-menu rounded-0 m-0 top-50 start-40 translate-middle mr-2">

                        <a th:href="@{/user/interview}" class="dropdown-item"><i class="fas fa-envelope"></i>
                            Interview</a>
                        <a th:href="@{/user/statusInterview}" class="dropdown-item"><i class="fas fa-envelope"></i>
                            Status Interview</a>
                        <!--                        <a href="" class="dropdown-item">My 5job</a>-->
                        <!--                        <a href="" class="dropdown-item">my resumes</a>-->
                        <a class="dropdown-item" th:href="@{/user/saveJob}"><i class="fas fa-heart"></i> Saved
                            jobs</a>
                        <a th:href="@{/user/appliedJob}" class="dropdown-item"><i class="fas fa-check"></i> Applied
                            jobs</a>

                        <!--                        <a href="" class="dropdown-item">Job alerts</a>-->
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <a th:href="@{#}" class="dropdown-item"><i class="bi bi-chat"></i>Chat</a>

                        <a th:href="@{/user/myAccount}" class="dropdown-item"><i class="fas fa-user"></i> My
                            account</a>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <a th:href="@{/logout}" class="dropdown-item"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
                <a th:href="@{/logout}" class="nav-item nav-link"
                   th:unless="${acc != null and not #strings.isEmpty(acc.name)}"><i class="fas fa-sign-in-alt"></i>
                    Login</a>

            </div>

            <!--            <a href="" class="btn btn-primary rounded-0 py-4 px-lg-5 d-none d-lg-block"><i-->
            <!--                    class="fa fa-arrow-right ms-3"></i></a>-->
        </div>
    </nav>

  <!-- Navbar End -->


  <!-- Header End -->
  <div class="container-xxl py-5 bg-dark page-header mb-5">
    <div class="container my-5 pt-5 pb-4">
      <h1 class="display-3 text-white mb-3 animated slideInDown">Job detail </h1>
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb text-uppercase">
          <li class="breadcrumb-item"><span  th:text="${job.name}"></span></li>
        </ol>
      </nav>
    </div>
  </div>
  <!-- Header End -->


  <!-- Job Detail Start -->
  <div class="container-xxl py-5 wow fadeInUp" data-wow-delay="0.1s">
    <div class="container">
      <div class="row gy-5 gx-4">
        <div class="col-lg-8">
          <div class="d-flex align-items-center mb-5">

            <th:block th:with="companyFounds=false">
              <!-- Dùng th:each để lặp qua danh sách -->
              <span th:each="employers : ${employersList}" th:unless="${companyFounds}">
        <!-- Kiểm tra điều kiện, nếu khớp thì hiển thị và đặt companyFound=true để dừng lặp -->
        <span th:if="${employers.getAccount().id == job.accountId}" th:with="companyFounds=true">
            <h4  th:unless="${companyFounds}"></h4>
<!--            <embed th:src="${employers.account.getAvatar()}" type="application/pdf" width="100%" height="600px" />-->
<!--            <span th:text="${employers.account.getAvatar()}"></span>-->
<!--                        <span th:text="${employers.account.getEmail()}"></span>-->

   <img class="flex-shrink-0 img-fluid border rounded" th:if="${employers.account.getAvatar() ne null}" th:src="${employers.account.getAvatar()}" alt="" style="width: 80px; height: 80px;">
             <img class="flex-shrink-0 img-fluid border rounded" th:if="${employers.account.getAvatar() == null}" th:src="@{/img/nomal.jpg}" alt="" style="width: 80px; height: 80px;">
<!--  <img th:src="${imageUrl}" alt="Cloudinary Image">-->

        </span>

    </span>

              <!-- Hiển thị thông báo nếu không tìm thấy công ty -->

              <h4  th:unless="${companyFound}"></h4>

              <!-- Các dòng code khác nếu cần -->
            </th:block>

            <div class="text-start ps-4">
              <h3 class="mb-3" th:text="${job.name}"></h3>
              <span class="text-truncate me-3"><i class="fa fa-map-marker-alt text-primary me-2"></i><span th:text="${job.address}"></span></span>
              <span class="text-truncate me-3"><i class="far fa-clock text-primary me-2"></i><span th:text="${job.requestTime}"></span></span>
              <span class="text-truncate me-0"><i class="far fa-money-bill-alt text-primary me-2"></i><span  style="display:none;" id="salaryValue" th:text="${job.salary}"></span></span>
              <script>
                var salaryElement = document.getElementById('salaryValue');
                var salary = parseFloat(salaryElement.innerText.replace(/[^0-9.-]+/g,"")); // Remove non-numeric characters

                // Check if salary is a valid number
                if (!isNaN(salary)) {
                  var formattedSalary = salary.toLocaleString('vi-VN', { style: 'currency', currency: 'VND' });
                  document.write(formattedSalary);
                } else {
                  document.write("Invalid salary value");
                }
              </script>
            </div>
          </div>

          <div class="mb-5">
            <h4 class="mb-3">Job description</h4>
            <p th:text="${job.desription}"></p>

              <th:block th:with="companyFound=false">
                <!-- Dùng th:each để lặp qua danh sách -->
                <span th:each="employers : ${employersList}" th:unless="${companyFound}">
        <!-- Kiểm tra điều kiện, nếu khớp thì hiển thị và đặt companyFound=true để dừng lặp -->
        <span th:if="${employers.getAccount().id == job.accountId}" th:with="companyFound=true">

        <p> If you have any questions or apply, you can send your CV to email:   <span th:text="${employers.getAccount().email}"></span> </p>

        </span>
    </span>

                <!-- Hiển thị thông báo nếu không tìm thấy công ty -->
                <h4  th:unless="${companyFound}"></h4>

                <!-- Các dòng code khác nếu cần -->
              </th:block>

            <h4 class="mb-3">Benefit</h4>
            <p th:text="${job.benefit}"></p>
<!--            <ul class="list-unstyled">-->
<!--              <li><i class="fa fa-angle-right text-primary me-2"></i>Dolor justo tempor duo ipsum accusam</li>-->
<!--              <li><i class="fa fa-angle-right text-primary me-2"></i>Elitr stet dolor vero clita labore gubergren</li>-->
<!--              <li><i class="fa fa-angle-right text-primary me-2"></i>Rebum vero dolores dolores elitr</li>-->
<!--              <li><i class="fa fa-angle-right text-primary me-2"></i>Est voluptua et sanctus at sanctus erat</li>-->
<!--              <li><i class="fa fa-angle-right text-primary me-2"></i>Diam diam stet erat no est est</li>-->
<!--            </ul>-->
<!--            <h4 class="mb-3">Qualifications</h4>-->
<!--            <p>Magna et elitr diam sed lorem. Diam diam stet erat no est est. Accusam sed lorem stet voluptua sit sit at stet consetetur, takimata at diam kasd gubergren elitr dolor</p>-->
<!--            <ul class="list-unstyled">-->
<!--              <li><i class="fa fa-angle-right text-primary me-2"></i>Dolor justo tempor duo ipsum accusam</li>-->
<!--              <li><i class="fa fa-angle-right text-primary me-2"></i>Elitr stet dolor vero clita labore gubergren</li>-->
<!--              <li><i class="fa fa-angle-right text-primary me-2"></i>Rebum vero dolores dolores elitr</li>-->
<!--              <li><i class="fa fa-angle-right text-primary me-2"></i>Est voluptua et sanctus at sanctus erat</li>-->
<!--              <li><i class="fa fa-angle-right text-primary me-2"></i>Diam diam stet erat no est est</li>-->
<!--            </ul>-->
          </div>

          <div class="">
            <h4 class="mb-4">Apply For The Job</h4>
            <form  th:action="@{/user/applyJob/{id}(id=${job.id})}" method="post" th:object="${candidateJob}" enctype="multipart/form-data">
              <div class="row g-3">
<!--                <div class="col-12 col-sm-6">   @{/user/saveJob/{id}(id=${job.id})}-->
<!--                  <input type="text" class="form-control" placeholder="Your Name">-->
<!--                </div>-->
                <div class="col-12 col-sm-6">
                  <input type="text" class="form-control" name="phone" placeholder="phone">
                </div>
                <div class="col-12 col-sm-6">
                  <input type="text" class="form-control" name="emailUserApply" placeholder="Your Email">
                </div>
                <div class="col-12 col-sm-6">
                  <input type="file" name="file" class="form-control  bg-white">
                </div>
<!--                  <div class="col-12 col-sm-6">-->
<!--                      <input type="file" name="file" class="form-control bg-white">-->
<!--                  </div>-->
                <div class="col-12">
                  <textarea class="form-control" rows="5" name="note" placeholder="Notes and skills"></textarea>
                </div>
                <div class="col-12">
                  <button class="btn btn-primary w-100" type="submit">Apply Now</button>
                </div>
              </div>
            </form>

          </div>
        </div>
<!--          <img th:src="@{/image/{id}(id=${candidateJob.id})}" alt="Avatar">-->
        <div class="col-lg-4">
          <div class="bg-light rounded p-5 mb-4 wow slideInUp" data-wow-delay="0.1s">
            <h4 class="mb-4">Job Summery</h4>
            <p><i class="fa fa-angle-right text-primary me-2"></i>Published On: <span th:text="${job.createdAt}"></span></p>
            <p><i class="fa fa-angle-right text-primary me-2"></i>Quantity: <span th:text="${job.totalCandidate}"></span></p>
            <p><i class="fa fa-angle-right text-primary me-2"></i>Job Nature: <span th:text="${job.requestTime}"></span></p>
            <span><span style="display:none;" id="salaryValue1" th:text="${job.salary}"></span></span>
            <script>
              var salaryElement = document.getElementById('salaryValue1');
              var salary = parseFloat(salaryElement.innerText.replace(/[^0-9.-]+/g,"")); // Remove non-numeric characters

              // Check if salary is a valid number
              if (!isNaN(salary)) {
                var formattedSalary = salary.toLocaleString('vi-VN', { style: 'currency', currency: 'VND' });
                document.write("<i class=\"fa fa-angle-right text-primary me-2\"></i>Salary: "+formattedSalary);
              } else {
                document.write("Invalid salary value");
              }
            </script>
            <p><i class="fa fa-angle-right text-primary me-2"></i>Location: <span th:text="${job.address}"></span></p>
            <p class="m-0"><i class="fa fa-angle-right text-primary me-2"></i>Date Line: <span th:text="${job.deadline}"></span></p>
          </div>
          <div class="bg-light rounded p-5 wow slideInUp" data-wow-delay="0.1s">
            <th:block th:with="companyFound=false">
              <!-- Dùng th:each để lặp qua danh sách -->
              <span th:each="employers : ${employersList}" th:unless="${companyFound}">
        <!-- Kiểm tra điều kiện, nếu khớp thì hiển thị và đặt companyFound=true để dừng lặp -->
        <span th:if="${employers.getAccount().id == job.accountId}" th:with="companyFound=true">
        <a th:href="@{/user/companyInfo/{id}(id=${employers.id})}">  <h4 th:text="${employers.name}"></h4> </a>

          <p th:text="${employers.decription}"></p>
        </span>
    </span>

              <!-- Hiển thị thông báo nếu không tìm thấy công ty -->
              <h4  th:unless="${companyFound}"></h4>

              <!-- Các dòng code khác nếu cần -->
            </th:block>


<!--            <p class="m-0">Ipsum dolor ipsum accusam stet et et diam dolores, sed rebum sadipscing elitr vero dolores. Lorem dolore elitr justo et no gubergren sadipscing, ipsum et takimata aliquyam et rebum est ipsum lorem diam. Et lorem magna eirmod est et et sanctus et, kasd clita labore.</p>-->
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Job Detail End -->


  <!-- Footer Start -->
  <div class="container-fluid bg-dark text-white-50 footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
    <div class="container py-5">
      <div class="row g-5">
        <div class="col-lg-3 col-md-6">
          <h5 class="text-white mb-4">Company</h5>
          <a class="btn btn-link text-white-50" href="">About Us</a>
          <a class="btn btn-link text-white-50" href="">Contact Us</a>
          <a class="btn btn-link text-white-50" href="">Our Services</a>
          <a class="btn btn-link text-white-50" href="">Privacy Policy</a>
          <a class="btn btn-link text-white-50" href="">Terms & Condition</a>
        </div>
        <div class="col-lg-3 col-md-6">
          <h5 class="text-white mb-4">Quick Links</h5>
          <a class="btn btn-link text-white-50" href="">About Us</a>
          <a class="btn btn-link text-white-50" href="">Contact Us</a>
          <a class="btn btn-link text-white-50" href="">Our Services</a>
          <a class="btn btn-link text-white-50" href="">Privacy Policy</a>
          <a class="btn btn-link text-white-50" href="">Terms & Condition</a>
        </div>
        <div class="col-lg-3 col-md-6">
          <h5 class="text-white mb-4">Contact</h5>
          <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>Da Nang, Viet Nam</p>
          <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+91199919199</p>
          <p class="mb-2"><i class="fa fa-envelope me-3"></i>info@gmail.com</p>
          <div class="d-flex pt-2">
            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-twitter"></i></a>
            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-facebook-f"></i></a>
            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-youtube"></i></a>
            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <h5 class="text-white mb-4">Newsletter</h5>
          <p>Dolor amet sit justo amet elitr clita ipsum elitr est.</p>
          <div class="position-relative mx-auto" style="max-width: 400px;">
            <input class="form-control bg-transparent w-100 py-3 ps-4 pe-5" type="text" placeholder="Your email">
            <button type="button" class="btn btn-primary py-2 position-absolute top-0 end-0 mt-2 me-2">SignUp</button>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="copyright">
        <div class="row">
          <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
            &copy; <a class="border-bottom" href="#">5Jobs</a>, All Right Reserved.

            <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
            Designed By <a class="border-bottom" href="">Code By Canh Vuong</a>
          </div>
          <div class="col-md-6 text-center text-md-end">
            <div class="footer-menu">
              <a href="">Home</a>
              <a href="">Cookies</a>
              <a href="">Help</a>
              <a href="">FQAs</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Footer End -->


  <!-- Back to Top -->
  <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
</div>

<!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/lib/wow/wow.min.js}"></script>
<script th:src="@{/lib/easing/easing.min.js}"></script>
<script th:src="@{/lib/waypoints/waypoints.min.js}"></script>
<script th:src="@{/lib/owlcarousel/owl.carousel.min.js}"></script>

<!-- Template Javascript -->
<script th:src="@{/js/main.js}"></script>
</body>

</html>